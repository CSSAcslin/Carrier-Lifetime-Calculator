# 更新日志

### α 1.10.2 2025.9.22-27
修改：图像显示区域重写  
新增：历史数据查看功能实现  
新增：多图像区域同时显现，最多四幅图（巨难搞）  
为了实现上述功能：  
修改：时间滑块独立到各个图像显示区域  
修改：图像数据与画布绑定  
修改：数据读取更新在SubImageDisplayWidget内部实现  
修改：完成ImagingData的实现   
新增：实现了add canvas功能   
后续还有诸多细节需要修改，本次提交注释掉的弃用代码保留，下一版本会删除    

### α 1.10.1 2025.9.18-20
新增：加入data类DataManager用于管理数据  
新增：新增菜单栏中管理data的选项，主要实现了历史记录的删除  
修改：整个程序的数据结构大改  
修改：同时解决了原本数据加载的一些bug，比如EM线程的重加载失效问题，先质量评价才能stft的问题  
修改：数据管线的更新，使得部分冗余代码得已释放  
修改：结果绘制模块部分接入Data，但是未完全并入，比如更新和删除数据  
备注：目前ImageData还未使用    
问题：EM线程重载仍存在问题  

### α 1.10.0 2025.9.15-17
整体样式外观大更新  
新增：科学计算分析模块预留位置  
新增：帮助提示弹窗（仅extradialog，且未添加内容）  
新增：fs-iSCAT文件导入能支持tif格式的文件  
新增：图像显示区域新增toolbar  
新增：EM-iSCAT数据导出支持tif,avi,gif,png格式  
修改：图像显示界面提级为QMainwindow（这样才能加toolbar），并预备大面积改写  
修改：完善报错机制，将一些错误提示改为弹窗(使用状态栏函数传递）   
修改：使得原本fs-iSCAT的tiff导入不仅局限于np两种类型  
修改：调整一些参数的范围,参数命名fs修改为fps（拍摄帧率）  
修改：调整主界面窗口大小  
修改：总进度条显示修改  
修改：原本EM-iSCAT的tif数据无法导入的问题  
修改：原本folder_path_label停用，改为状态栏和console更新  
修改：修改了一些文字提示内容
删除了wvd的内容  


### α 1.9.8 2025.9.12
新增：窗函数代码改写，进一步拓展窗函数库  
~~新增：wvd的计算方法实验~~

### α 1.9.7 2025.8.26
新增：Gabor变换，以及stft中其他窗函数的选择  
修改：为其他变换方法预留位置  
修改：现在EM-iSCAT的stft方法里显示结果变为全局设置  
修改：主界面出现的参数（不是pop出来的）也打包进了params，但是目前没啥用其实  

### β 1.9.6 2025.8.7
无实质更新，作为一主要版本打包

### α 1.9.5 2025.7.26
修改：现在可以终止计算而不闪退了，但是还存在一些问题  
新增：时频变换结果导出功能  
修改：增加程序稳健性（错误判断）  

### α 1.9.4 2025.7.22-25
修改：以字典存储EM参数设置  
修改：将stft的质量评价和计算结果分为两个部分  
修改：修复上一版本导致的stft计算闪退问题  
修改：stft信号*5的修正（尽管不知道为什么）
修改：现在可以设置cwt的范围和密度了  
修改：EM中绘图的时间轴问题修复了  
帧数选择错误会闪退

### α 1.9.3 2025.7.21
中间一直没有传新版本，但本版本还是实现了比较大的功能——cwt    
新增：EM-iSCAT的tiff读取（仍有一点需要修改）  
新增：cwt的质量评价功能（没错cwt的质量评价和计算分开了）  
新增：cwt的小波选择（目前有四种）  
新增：cwt的python的计算（但是计算细节还有待优化，而且现在来看cwt非常慢，算10个点就要16分钟）  
修改：不少函数和变量的重命名
修改：解决绘图时间尺度问题  
修改：改名为“成像数据处理工具箱”  
修改：解决关闭线程命令在EM-iSCAT模式下卡死的问题  
问题：绘图太卡，是否需要放入新线程呢？  

### β 1.9.2 2025.7.4
修改：series绘图数据优化  
新增：采样频率设置  
新增：数据处理计时  
修改：一些错误兼容性

### α 1.9.1 2025.7.3
修改：修复上一版本无法进行stft计算的致命bug  
新增：ROI选取兼容EM-iSCAT数据  
新增：选取信号均值计算 得到的是论文里的那个信号  
新增：对上面得到的数据进行绘图  
修改：增加一些错误兼容性  


### α 1.9.0 2025.7.1
新增：avi读取功能  
新增：大量数据处理放入独立线程（为EM量身定制）  
新增：EM-iSCAT数据的去除背景和展开（方便后面）的预处理  
新增：python代码的stft处理（比matlab快两倍）  
新增：stft参数设置的弹窗  
新增：信号质量评价的绘图功能  
修改：界面发生适配性修改  
修改：多条提示语发生修改  
修改：不同功能切换逻辑优化——计算线程只有选择FS和光热模式下才会载入  
修改：线程退出更加严谨  
修改：函数名的修改  
待办：ROI功能完善并与EM-iSCAT数据处理流的融合  

### α 1.8.6-unfinished 2025.6.30
新增：正在制作avi读取的EM-iSCAT功能  

### α 1.8.5 2025.6.26
修改：diff的数据导出标题交换回最初状态  

### α 1.8.4 2025.6.25
修改：R方初始化设置数值不匹配的问题  
修改：扩散系数计算导出数据时的问题  
新增：导出数据时可以对导出的格式进行调整（可以去掉拟合数据）

### β 1.8.3 2025.6.19
修改：上一版本导致的输入错误帧数就闪退的bug  
解决：之前提到的数据和图片导出问题，现在会导出当前标签页的数据了  
解决：载流子扩散计算基本OK了，优化了不少，不过现在的roi会卡很多  
修改：新的设置同步绘图更新只能在绘图设置中可用，计算设置不可用，临时加参阻塞了  

### α 1.8.2 2025.6.18
修改：上一版本其实有一个bug，就是FS的选取功能不可用，跑到PA那里去了，现在修改了  
修改：重载数据时间轴不变的bug  
修改：修改一些文字说明
问题：多标签页的加入带来诸多问题，尤其是载流子扩散计算这一块

### α 1.8.1 2025.6.16
修改：左侧设置大改  
修改：诸多变量名称修改  
修改：时空参数设置合并  
新增：模式选择，重构为三种模式  
新增：EM-iSCAT模式，但暂未实现    
修改：模式选择将会影响数据导入和分析设置中的功能选择  

### α 1.8.0 2025.6.4 
新增：结果显示的多标签页结构  
修改：鼠标移动取点有时会导致闪退的严重bug   
修改：现在绘图设置修改可以直接更新在结果显示中了
修改：布局微调  
待办：但是现在数据导出还只能导出最后一次的数据  

### α 1.7.7 2025.5.27
修改：修复坏帧的代码因为之前合并了roi-mask所以有问题，现在OK了  

### β 1.7.6 2025.5.17
严重问题解决：无法打包bug已修复  
新增：位置显示增加了原始数据值，并且会随着帧数变化而变化  
修改：页面重构结束，布局可以自定义  
修改：鼠标位置显示移动  
修改：原本位置显示的时间有误
修改：原本正方形的区域大小输入偶数会进为奇数，现在是生成正常大小但是偏右下的矩形。  
修改：向量直线线宽设置会报错的问题 

### α 1.7.5 2025.5.16
修改：重构页面布局 改为悬浮窗  

### α 1.7.4 2025.5.15
新增：添加了icon（内置）  
修改：从头算时绘图设置的问题
修改：从头算时曲线拟合并不完全的问题  
另外还写了点readme

### α 1.7.3 2025.5.14
修改：现在区域选择为圆形时，半径填1输出的是单点了，和正方形选区统一了  
修改：sif_parser 改为全部导入  

### α 1.7.2 2025.4.30
修改：导出时没导出也提示成功的问题  
修改：扩散系数计算重置roi计算时，纵轴不变的问题  
严重问题：无法完整打包，故1.7.1变为α，暂未解决  

### α 1.7.1 2025.4.28
新增：从头计算还是默认从最大值计算的选项（为sif处理做的）   
修改：现在缩放可以以鼠标为中心了  
修改：数据清洗/筛选设置重名为“计算设置”  
修改：sif数据拟合时而出错  
修改：计算设置每次进入都会重置目前设置的问题

### α 1.7.0 2025.4.27
新增：图像显示可以缩放（滚轮）移动（中键）啦  
新增：sif格式处理，但目前只测试了区域寿命曲线功能  
新增：图像处理模式（现在有五种，但是都是试用）  
新增：图像坐标轴设置(目前仅支持自动设置)  
修改：绘图设置的默认与原本默认不匹配问题  
修改：绘图设置每次进入都会重置目前设置的问题

### α 1.6.1-unfinished 2025.4.26
新增：sif格式试运行，数据修改还未完成。

### β 1.6.0 2025.4.25
新增：扩散系数计算系统完成  
已知问题：导出数据没有标题 不知原因

### α 1.5.10-unfinished 2025.4.24
扩散系数中的多处修改，但目前数据打包出现问题

### α 1.5.9-unfinished 2025.4.23
修改：将扩散系数计算的拟合过程放入线程中，一步出所有需要的结果。但扩散系数还是在绘图里。


### α 1.5.8-unfinished 2025.4.22
新增：载流子扩散计算功能，但未完成全流程  
修改：矢量直线一次只能保留一支，宽度区域设置与画笔大小设置统一  
修改：ROI对话框修改确认按钮拆成两个了  
修改：ROI工具栏显示初步修改  
修改：窗口大小修改 

### α 1.5.7-unfinished 2025.4.21
新增：矢量直线功能，为后续计算扩散系数做准备  
已知问题：未做数据管理，所以该功能不可用

### α 1.5.6 2025.4.21
新增：直线矩形椭圆的shift绘制模式    
修改：绘图ROI代码关键鼠标控制部分修改  
修改：新增编辑窗口打开提示

### α 1.5.5 2025.4.19
修改：导入按钮顺序微调  
新增：双指数分析的区域寿命曲线亦可用

### α 1.5.4-unfinished 2025.4.17
ROI模块已可用，但数据不能显示目前  
新增：双指数分析，但未完全可用  
修改：数据筛选默认范围调整  
修改：原本单位时长会重复计算两次，现在已修复  
修改：起始时间选项已经删除（无必要的参数，且会造成bug）  
修改：选点区域设置范围可根据图像数据自动调整  

### α 1.5.3-unfinished 2025.4.16
新增：ROI绘制模块，基本可用，但数据流未连接  
修改：剔除不必要的代码  
修改：增加提示语和logging

### α 1.5.2 2025.4.15
新增：ROI选取的菜单，但功能未实装  
修改：完全放弃放大zoom保留代码

### α 1.5.1 2025.4.15
修改：解决时空单位的精确度问题（现在三位小数）  
修改：解决时间滑块不归零的问题  
修改：版本号统一  

### β 1.5.0 2025.4.14
新增：数据筛选功能  
新增：绘图设置功能  
优化：数据处理数值筛选加入了根据峰值位置的筛选，去除无效数据

### α 1.4.2 2025.4.14
新增：报错收集在log中

### β 1.4.1 2025.4.11
打包版本公布
代码骨架优化

### α 1.4.0 2025.4.10
新增：去坏点功能（不推荐使用自动）  
新增：clear-r命令，清除画板  
修改：补充一些提示语  
修改：解决了原本二次画图colorbar重叠的问题

### α 1.3.1
修改：现在计算中 计算按钮将被禁用  
修改：原来状态栏显示的一系列问题  
修改：文件结构调整，增加红绿灯

### α 1.3.0
新增状态栏、  
新增计算线程、  
新增计算进度条（实装）、  
线程控制优化、  
布局调整、  
命令行优化。

### α 1.2.3-unfinished 
新增状态栏、线程调试、布局调整

### α 1.2.2 
略微修改代码，  
这是多线程增加前的最后一个可行版本，后续可能会大改并产生多个不可用版本

### α 1.2.1
 添加控制台，微调代码结构，后续需要增加多线程了
 
### α 1.2.0-unfinished 
添加console控制台

### α 1.1.1 
小更新，调整一些参数

### α 1.1.0 
基本功能已实现  
可以选点计算

### α 1.0 (initial commit version) 2025.3.28
核心运算功能已添加，再完善运行


